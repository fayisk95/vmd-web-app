<h1 mat-dialog-title>{{ data.isEditMode ? 'Edit Category' : 'Add New Category' }}</h1>

<div mat-dialog-content>
  <form [formGroup]="categoryForm" class="category-form">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Category Name</mat-label>
      <input matInput formControlName="name" placeholder="e.g., Premium, Luxury">
      <mat-error>{{ getFieldError('name') }}</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Description</mat-label>
      <textarea matInput formControlName="description" rows="3" 
                placeholder="Describe the features and amenities of this category"></textarea>
      <mat-error>{{ getFieldError('description') }}</mat-error>
    </mat-form-field>

    <div class="form-row">
      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Base Rate</mat-label>
        <input matInput type="number" formControlName="baseRate" min="0" step="0.01" placeholder="50.00">
        <span matPrefix>$&nbsp;</span>
        <mat-hint>Base price before multiplier</mat-hint>
        <mat-error>{{ getFieldError('baseRate') }}</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Price Multiplier</mat-label>
        <input matInput type="number" formControlName="multiplier" min="0.1" max="10" step="0.1" placeholder="1.5">
        <span matSuffix>x</span>
        <mat-hint>Multiplier applied to base rate (0.1 - 10.0)</mat-hint>
        <mat-error>{{ getFieldError('multiplier') }}</mat-error>
      </mat-form-field>
    </div>

    <!-- Effective Rate Preview -->
    <div class="rate-preview" *ngIf="categoryForm.get('baseRate')?.value && categoryForm.get('multiplier')?.value">
      <div class="preview-calculation">
        <div class="calc-row">
          <span class="label">Base Rate:</span>
          <span class="value">${{ categoryForm.get('baseRate')?.value | number:'1.2-2' }}</span>
        </div>
        <div class="calc-row">
          <span class="label">Multiplier:</span>
          <span class="value">{{ categoryForm.get('multiplier')?.value }}x</span>
        </div>
        <div class="calc-row total">
          <span class="label">Effective Rate:</span>
          <span class="value">${{ getEffectiveRate().toFixed(2) }}</span>
        </div>
      </div>
    </div>

    <div class="form-row">
      <mat-checkbox formControlName="isActive">
        Active Category
      </mat-checkbox>
    </div>
  </form>
</div>

<div mat-dialog-actions class="dialog-actions">
  <button mat-button (click)="onCancel()">Cancel</button>
  <button mat-raised-button color="primary" (click)="onSave()" [disabled]="categoryForm.invalid">
    <mat-icon>{{ data.isEditMode ? 'save' : 'add' }}</mat-icon>
    {{ data.isEditMode ? 'Update Category' : 'Create Category' }}
  </button>
</div>